<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manage Custom Trivia Questions</title>
    <link rel="stylesheet" href="../../styles/manageTriviaQuestions.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <video autoplay loop muted playsinline class="background-clip">
      <source
        src="../Images/backGrounds/aesthetic-landscape-with-train.1920x1080.mp4"
        type="video/mp4"
      />
      Your browser does not support the video tag.
    </video>
    <h1>Manage Custom Trivia Questions</h1>
    <a href="http://localhost:3000/triviaHome">Go Back</a>
    <br />

    <% if (query.status === "deleted") { %>
    <p style="color: green">Question deleted successfully!</p>
    <% } else if (query.status === "updated") { %>
    <p style="color: green">Question updated successfully!</p>
    <% } %>
    <br />
    <!-- Form to add a new question -->
    <form action="/triviaGame/custom" method="POST">
      <label for="question">Question:</label>
      <input type="text" name="question" id="question" required />

      <label for="correct_answer">Correct Answer:</label>
      <input type="text" name="correct_answer" id="correct_answer" required />

      <label for="incorrect_answers"
        >Incorrect Answers (comma-separated):</label
      >
      <input
        type="text"
        name="incorrect_answers"
        id="incorrect_answers"
        required
      />

      <button type="submit">Add Question</button>
    </form>

    <!-- List of existing custom questions -->
    <h2>Existing Questions</h2>
    <ul>
      <% customQuestions.forEach((question, index) => { %>
      <li>
        <strong id="question"><%= question.question %></strong><br />
        <span id="correct"> Correct Answer: <%= question.correct_answer %></span
        ><br />
        <span id="incorrect">
          Incorrect Answers: <%= Array.isArray(question.incorrect_answers) ?
          question.incorrect_answers.join(", ") : "" %><br />
        </span>

        <!-- Edit form (PATCH) -->
        <form action="/triviaGame/custom/0?_method=PATCH" method="POST">
          <input
            type="text"
            name="question"
            value=""
            placeholder="Updated question text"
          />
          <input
            type="text"
            name="correct_answer"
            value=""
            placeholder="Updated correct answer"
          />
          <input
            type="text"
            name="incorrect_answers"
            value=""
            placeholder="Answer 1, Answer 2"
          />
          <button type="submit">Update Question</button>
        </form>

        <!-- Delete form (DELETE) -->
        <form
          action="/triviaGame/custom/<%= index %>?_method=DELETE"
          method="POST"
        >
          <button type="submit">Delete Question</button>
        </form>
      </li>
      <% }); %>
    </ul>
  </body>
</html>
